{
  "header": {
    "namespaces": { "x": "http://www.netex.org.uk/netex" }
  },
  "observations": [
    {
      "details": "If ProductType is dayPass or periodPass, timeIntervals element should be present in Tariff",
      "category": "Conditional Check",
      "context": "//x:CompositeFrame/x:frames/x:FareFrame",
      "rules": [
        { "test": "is_time_intervals_present_in_tarrifs(.)" },
        { "test": "is_individual_time_interval_present_in_tariffs(.)" },
        { "test": "is_time_interval_name_present_in_tariffs(.)" },
        {
          "test": "is_fare_structure_element_present(.)"
        }
      ]
    },
    {
      "details": "If ProductType is singleTrip, dayReturnTrip or periodReturnTrip, FareStructureElement.GenericParameterAssignment elements should be present in Tariff.FareStructureElements",
      "category": "Conditional Check",
      "context": "//x:CompositeFrame/x:frames/x:FareFrame",
      "rules": [
        {
          "test": "is_generic_parameter_limitations_present(.)"
        }
      ]
    },
    {
      "details": "If fareZones is present in FareFrame, additional fareZones properties should be present",
      "category": "Conditional Check",
      "context": "//x:CompositeFrame/x:frames/x:FareFrame/x:fareZones",
      "rules": [
        {
          "test": "is_fare_zones_present_in_fare_frame(.)"
        }
      ]
    },
    {
      "details": "If ServiceFrame is present, TypeOfFrameRef should include UK_PI_NETWORK",
      "category": "Conditional Check",
      "context": "//x:CompositeFrame/x:frames/x:ServiceFrame",
      "rules": [
        {
          "test": "is_service_frame_present(.)"
        }
      ]
    },
    {
      "details": "If lines present in ServiceFrame, corresponding Line properties should be present",
      "category": "Conditional Check",
      "context": "//x:CompositeFrame/x:frames/x:ServiceFrame",
      "rules": [
        {
          "test": "is_lines_present_in_service_frame(.)"
        }
      ]
    },
    {
      "details": "If scheduledStopPoints is present in ServiceFrame, it's other properties should be present",
      "category": "Conditional Check",
      "context": "//x:CompositeFrame/x:frames/x:ServiceFrame",
      "rules": [
        {
          "test": "is_schedule_stop_points(.)"
        }
      ]
    },
    {
      "details": "Mandatory element 'ValidBetween' missing",
      "category": "Mandatory Element",
      "context": "//x:CompositeFrame",
      "rules": [
        {
          "test": "count(x:ValidBetween) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'FromDate' missing",
      "category": "Mandatory Element",
      "context": "//x:CompositeFrame/x:ValidBetween",
      "rules": [
        {
          "test": "count(x:FromDate) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'TypeOfFrameRef' missing'",
      "category": "Mandatory Element",
      "context": "//x:CompositeFrame",
      "rules": [
        {
          "test": "count(x:TypeOfFrameRef) > 0"
        }
      ]
    },
    {
      "details": "Attribute 'ref' of element 'TypeOfFrameRef' is missing or attribute 'ref' value does not contain 'UK_PI_LINE_FARE_OFFER' or 'UK_PI_NETWORK_OFFER'",
      "category": "Mandatory Element",
      "context": "//x:dataObjects",
      "rules": [
        {
          "test": "check_value_of_type_of_frame_ref(.)"
        }
      ]
    },
    {
      "details": "Mandatory element 'Organisations' missing",
      "category": "Mandatory Element",
      "context": "//x:CompositeFrame/x:frames/x:ResourceFrame",
      "rules": [
        {
          "test": "count(x:organisations) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'Operator' missing",
      "category": "Mandatory Element",
      "context": "//x:ResourceFrame/x:organisations",
      "rules": [
        {
          "test": "count(x:Operator) > 0"
        }
      ]
    },
    {
      "details": "'Operator' attribute 'id' format should be noc:xxxx",
      "category": "Mandatory Element",
      "context": "//x:ResourceFrame/x:organisations/x:Operator",
      "rules": [
        {
          "test": "check_operator_id_format(.)"
        }
      ]
    },
    {
      "details": "Mandatory element 'Public Code' missing",
      "category": "Mandatory Element",
      "context": "//x:ResourceFrame/x:organisations/x:Operator",
      "rules": [
        {
          "test": "count(x:PublicCode) > 0"
        }
      ]
    },
    {
      "details": "Element 'Public Code' should be 4 characters long",
      "category": "Mandatory Element",
      "context": "//x:ResourceFrame/x:organisations/x:Operator/x:PublicCode",
      "rules": [
        {
          "test": "check_public_code_length(.)"
        }
      ]
    },
    {
      "details": "Mandatory element 'Name' missing",
      "category": "Mandatory Element",
      "context": "//x:ResourceFrame/x:organisations/x:Operator",
      "rules": [
        {
          "test": "count(x:Name) > 0"
        }
      ]
    },
    {
      "details": "Attribute 'ref' of element 'TypeOfFrameRef' is missing or attribute 'ref' value does not contain 'UK_PI_FARE_PRODUCT' or 'UK_PI_FARE_PRICE'",
      "category": "Mandatory Element",
      "context": "//x:CompositeFrame",
      "rules": [
        {
          "test": "check_type_of_frame_ref_ref(.)"
        }
      ]
    },
    {
      "details": "Mandatory element 'TariffBasis' missing",
      "category": "Mandatory Element",
      "context": "//x:tariffs//x:Tariff",
      "rules": [
        {
          "test": "count(x:TariffBasis) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'validityConditions' missing",
      "category": "Mandatory Element",
      "context": "//x:tariffs//x:Tariff",
      "rules": [
        {
          "test": "count(x:validityConditions) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'FromDate' missing",
      "category": "Mandatory Element",
      "context": "//x:tariffs//x:Tariff/x:validityConditions/x:ValidBetween",
      "rules": [
        {
          "test": "count(x:FromDate) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'OperatorRef' missing",
      "category": "Mandatory Element",
      "context": "//x:tariffs//x:Tariff",
      "rules": [
        {
          "test": "count(x:OperatorRef) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'TypeOfTariffRef' missing",
      "category": "Mandatory Element",
      "context": "//x:tariffs//x:Tariff",
      "rules": [
        {
          "test": "count(x:TypeOfTariffRef) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'TypeOfTariffRef' does not have an acceptable 'ref' value",
      "category": "Mandatory Element",
      "context": "//x:tariffs//x:Tariff/x:TypeOfTariffRef",
      "rules": [
        {
          "test": "check_type_of_tariff_ref_values(.)"
        }
      ]
    },
    {
      "details": "Mandatory element 'fareStructureElements' missing",
      "category": "Mandatory Element",
      "context": "//x:FareFrame/x:tariffs/x:Tariff",
      "rules": [
        {
          "test": "count(x:fareStructureElements) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'FareStructureElement' checks failed: Present at least 3 times, check the 'ref' values are in the correct combination for both 'TypeOfFareStructureElementRef' and 'TypeOfAccessRightAssignmentRef' elements.",
      "category": "Mandatory Element",
      "context": "//x:FareFrame/x:tariffs/x:Tariff/x:fareStructureElements",
      "rules": [
        { "test": "all_fare_structure_element_checks(.)" },
        { "test": "check_fare_structure_element(.)" }
      ]
    },
    {
      "details": "Mandatory element 'FareStructureElement' checks failed: Present at least 3 times, check the 'ref' values are in the correct combination for both 'TypeOfFareStructureElementRef' and 'TypeOfAccessRightAssignmentRef' elements.",
      "category": "Mandatory Element",
      "context": "//x:FareFrame/x:tariffs/x:Tariff/x:fareStructureElements/x:FareStructureElement",
      "rules": [
        { "test": "check_type_of_fare_structure_element_ref(.)" },
        { "test": "check_generic_parameter(.)" },
        { "test": "check_access_right_assignment_ref(.)" }
      ]
    },
    {
      "details": "Check if 'GenericParameterAssignment' has acceptable elements within it when 'TypeOfFareStructureElementRef' has a ref value of 'fxc:access'",
      "category": "Mandatory Element",
      "context": "//x:FareFrame/x:tariffs/x:Tariff/x:fareStructureElements",
      "rules": [
        {
          "test": "check_generic_parameters_for_access(.)"
        }
      ]
    },
    {
      "details": "Check if 'GenericParameterAssignment' has acceptable elements within it when 'TypeOfFareStructureElementRef' has a ref value of 'fxc:eligibility'",
      "category": "Mandatory Element",
      "context": "//x:FareFrame/x:tariffs/x:Tariff/x:fareStructureElements",
      "rules": [
        {
          "test": "check_generic_parameters_for_eligibility(.)"
        }
      ]
    },
    {
      "details": "Mandatory fareTables elements missing for FareFrame - UK_PI_FARE_PRICE",
      "category": "Mandatory Element",
      "context": "//x:dataObjects",
      "rules": [
        {
          "test": "is_uk_pi_fare_price_frame_present(.)"
        }
      ]
    },
    {
      "details": "Mandatory element 'fareProducts' missing for FareFrame - UK_PI_FARE_PRODUCT",
      "category": "Mandatory Element",
      "context": "//x:dataObjects/x:CompositeFrame/x:frames/x:FareFrame",
      "rules": [
        {
          "test": "check_fare_products(.)"
        }
      ]
    },
    {
      "details": "Mandatory element 'PreassignedFareProduct' or it's children missing in fareProducts for FareFrame - UK_PI_FARE_PRODUCT",
      "category": "Mandatory Element",
      "context": "//x:dataObjects",
      "rules": [
        {
          "test": "check_preassigned_fare_products(.)"
        }
      ]
    },
    {
      "details": "Mandatory element 'validableElements' or it's children missing in fareProducts.PreassignedFareProduct for FareFrame - UK_PI_FARE_PRODUCT",
      "category": "Mandatory Element",
      "context": "//x:dataObjects",
      "rules": [
        {
          "test": "check_preassigned_validable_elements(.)"
        }
      ]
    },
    {
      "details": "Mandatory element 'AccessRightInProduct' or it's children missing in fareProducts.PreassignedFareProduct for FareFrame - UK_PI_FARE_PRODUCT",
      "category": "Mandatory Element",
      "context": "//x:dataObjects",
      "rules": [
        {
          "test": "check_access_right_elements(.)"
        }
      ]
    },
    {
      "details": "Mandatory salesOfferPackages elements missing for FareFrame - UK_PI_FARE_PRODUCT",
      "category": "Mandatory Element",
      "context": "//x:dataObjects",
      "rules": [
        {
          "test": "check_sales_offer_packages(.)"
        }
      ]
    },
    {
      "details": "Mandatory element 'SalesOfferPackage' salesOfferPackages for FareFrame - UK_PI_FARE_PRODUCT",
      "category": "Mandatory Element",
      "context": "//x:dataObjects",
      "rules": [
        {
          "test": "check_sales_offer_package(.)"
        }
      ]
    },
    {
      "details": "Mandatory element 'distributionAssignments' or it's children missing in salesOfferPackages for FareFrame - UK_PI_FARE_PRODUCT",
      "category": "Mandatory Element",
      "context": "//x:dataObjects",
      "rules": [
        {
          "test": "check_distribution_assignments_elements(.)"
        }
      ]
    },
    {
      "details": "Mandatory element 'salesOfferPackageElements' or it's children missing in salesOfferPackages for FareFrame - UK_PI_FARE_PRODUCT",
      "category": "Mandatory Element",
      "context": "//x:dataObjects",
      "rules": [
        {
          "test": "check_sales_offer_elements(.)"
        }
      ]
    },
    {
      "details": "Mandatory element 'FrequencyOfUse' or it's child missing in FareStructureElement with TypeOfFareStructureElementRef - fxc:travel_conditions",
      "category": "Mandatory Element",
      "context": "//x:dataObjects",
      "rules": [
        {
          "test": "check_frequency_of_use(.)"
        }
      ]
    }
  ]
}
