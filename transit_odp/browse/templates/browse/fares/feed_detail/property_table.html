{% extends "browse/base/property_table.html" %}

{% load i18n %}
{% load tz %}
{% load filters %}

{% block dataset_type %}
  {% trans "Fares data" %}
{% endblock %}

{% block owner_search_link %}
  {% url 'search-fares' host host.name %}?organisation={{ property.organisation.id }}
{% endblock %}


{% block datatype_content %}
<tr class="govuk-table__row">
  <th scope="row" class="govuk-table__header">{% trans 'NeTEx Version ' %}</th>
  <td class="govuk-table__cell" colspan="2">{{metadata.schema_version}}</td>
</tr>

<tr class="govuk-table__row">
 <th scope="row" class="govuk-table__header">{% trans 'Last updated' %}</th>
 <td class="govuk-table__cell dont-break-out">
   {{ object.published_at|localtime|date:"j M Y H:i" }} {% trans 'by ' %}
   {% if object.live_revision.published_by %}
     {{ object.live_revision.published_by.username }}
   {% else %}
     {% trans 'System' %}
   {% endif %}
 </td>
 <td class="govuk-table__cell">
   <a class="govuk-link"
      href="{% url 'fares-feed-changelog' pk=object.id host host.name %}"
   >
       {% trans 'View change log' %}
   </a>
 </td>
</tr>

<tr class="govuk-table__row">
  <th scope="row" class="govuk-table__header">{% trans 'Number of fare zones' %}</th>
  <td class="govuk-table__cell" colspan="2">{{metadata.num_of_fare_zones}}</td>
</tr>

<tr class="govuk-table__row">
  <th scope="row" class="govuk-table__header">{% trans 'Number of lines' %}</th>
  <td class="govuk-table__cell" colspan="2">{{metadata.num_of_lines}}</td>
</tr>

<tr class="govuk-table__row">
  <th scope="row" class="govuk-table__header">{% trans 'Number of sales offer packages ' %}</th>
  <td class="govuk-table__cell" colspan="2">{{metadata.num_of_sales_offer_packages}}</td>
</tr>

<tr class="govuk-table__row">
  <th scope="row" class="govuk-table__header">{% trans 'Number of fare products' %}</th>
  <td class="govuk-table__cell" colspan="2">{{metadata.num_of_fare_products}}</td>
</tr>

<tr class="govuk-table__row">
  <th scope="row" class="govuk-table__header">{% trans 'Number of user types' %}</th>
  <td class="govuk-table__cell" colspan="2">{{metadata.num_of_user_profiles}}</td>
</tr>

<tr class="govuk-table__row">
  <th scope="row" class="govuk-table__header">{% trans 'Earliest start date' %}</th>
  <td class="govuk-table__cell" colspan="2">{{metadata.valid_from}}</td>
</tr>

<tr class="govuk-table__row">
  <th scope="row" class="govuk-table__header">{% trans 'Earliest end date' %}</th>
  <td class="govuk-table__cell" colspan="2">{{metadata.valid_to}}</td>
</tr>
{% endblock %}
