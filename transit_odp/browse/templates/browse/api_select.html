{% extends 'browse/base.html' %}

{% load static %}
{% load i18n %}
{% load breadcrumbs %}

{% block title_tag %}
  {% trans 'API Service' %}
{% endblock %}

{% block breadcrumb.content %}
  {{ block.super }}
  {% breadcrumb 'API Service' %}
{% endblock %}

{% block heading.title.text %}
  {% trans 'API Service' %}

{% endblock %}

{% block heading.subtitle %}
  <div class="govuk-!-padding-right-9">
    {% if not user.is_authenticated %}
    <a class="govuk-link-bold govuk-body" href="{% url 'account_signup' host hosts.data %}">
      {% trans 'Register' %}
    </a>
    <p class="govuk-body govuk-!-padding-top-3">
      {% blocktrans %}
        To use the API, developers should register for an API_key.
        Append your API_Key and query parameters
        to your API requests.
      {% endblocktrans %}
    </p>
  {% endif %}

    <p class="govuk-body">
      <a class="govuk-link-bold" href="{% url 'api:timetableopenapi' host hosts.data %}">
        {% trans 'Timetables data API' %}
      </a>
    </p>

    {% if feature.avl %}
    <p class="govuk-body">
      <a class="govuk-link-bold" href="{% url 'api:avlopenapi' host hosts.data %}">
        {% trans 'Bus location data API' %}
      </a>
    </p>
    {% endif %}

    {% if feature.fares %}
    <p class="govuk-body">
      <a class="govuk-link-bold" href="{% url 'api:faresopenapi' host hosts.data %}">
        {% trans 'Fares data API' %}
      </a>
    </p>
    {% endif %}
  </div>
{% endblock %}

{% block heading.secondary %}
  <div class="govuk-grid-column-one-third">
    <h2 class="govuk-heading-m">
      {% trans 'What you need to know' %}
    </h2>
    <p class="govuk-body">
      <a class="govuk-link" href="{% url 'guidance:support-developer' host hosts.data %}">
        {% trans 'View developer documentation' %}
      </a>
    </p>
    <p class="govuk-body">
      <a class="govuk-link" href="https://www.gov.uk/government/consultations/bus-services-act-2017-bus-open-data"
         target="_blank">
        {% trans 'Find out more about bus open data' %}
      </a>
    </p>
    <p class="govuk-body">
      <a class="govuk-link" href="{% url 'contact' host hosts.root %}">
        {% trans 'Contact us for technical issues' %}
      </a>
    </p>
    <p class="govuk-body">
      <a class="govuk-link" href="{% url 'download-catalogue' host hosts.data %}">
        {% trans 'Download data catalogue' %}
      </a>
    </p>
  </div>
{% endblock %}
